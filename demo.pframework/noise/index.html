<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NoiseIndicator</title>
  </head>
  <body>
    <script src="https://app.protobject.com/framework/p.js"></script>
    <!-- <script src="config.js"></script> --> <!-- config.js is not needed since multiple devices are not involved -->
    <script>
      const lamp = new Protobject.Lamp({
        width: "100%",
        height: "100%",
        top: "0px",
        left: "0px",
      });

      Protobject.NoiseSensor.start(30); //generate events each 300 ms

      Protobject.NoiseSensor.onData((intensity) => {
        console.log(intensity);
        if (intensity > 3) {
          lamp.setColor("red");
          myText.setText("Silence please!");
        } else {
          lamp.setColor("white");
          myText.setText("");
        }
      });

      const myText = new Protobject.Text({
        placeholder: "",
        defaultText: "",
        editable: false,
        style: {
          backgroundColor: "transparent",
          border: "0",
          color: "white",
          fontSize: "30px",
          textAlign: "center",
        },
      });
    </script>
  </body>
</html>
